<mat-drawer-container class="example-container" [hasBackdrop]="true">
   <mat-drawer #drawer mode="over" position="end" class="box-sidenav">
      <form [formGroup]="cicloFilterForm">
         <p>Elegir parámetros</p>
         <ng-container>
            <mat-form-field appearance="outline">
               <mat-label>Campus*</mat-label>
               <mat-select multiple formControlName="campus">
                  <mat-option>Todos</mat-option>
               </mat-select>
            </mat-form-field>
         </ng-container>
         <ng-container>
            <mat-form-field appearance="outline">
               <mat-label>Área Responsable</mat-label>
               <mat-select multiple formControlName="areaResp">
                  <mat-option>Todos</mat-option>
                  <mat-option *ngFor="let row of listaAR" [value]="row.clave">{{row.clave}}</mat-option>
               </mat-select>
            </mat-form-field>
         </ng-container>
         <ng-container>
            <mat-form-field appearance="outline">
               <mat-label>Nivel/Modalidad</mat-label>
               <mat-select multiple formControlName="nivelMod">
                  <mat-option>Todos</mat-option>
                  <mat-option *ngFor="let row of listaNivel" [value]="row.clave">{{row.clave}}</mat-option>
               </mat-select>
            </mat-form-field>
         </ng-container>
         <ng-container>
            <mat-form-field appearance="outline">
               <mat-label>Estatus</mat-label>
               <mat-select multiple formControlName="estatus">
                  <mat-option [value]="null">Todos</mat-option>
                  <mat-option [value]="true">Activo</mat-option>
                  <mat-option [value]="false">Inactivo</mat-option>
               </mat-select>
            </mat-form-field>
         </ng-container>
         <div class="container-btn-params">
            <button type="button" mat-raised-button class="mat-secundary">Cancelar</button>
            <button type="button" mat-raised-button color="primary" (click)="aplicarFiltro();drawer.toggle()">Aplicar</button>
         </div>
         <div class="text-right">
            <button type="button" mat-raised-button>Limpiar Filtros</button>
         </div>
      </form>
   </mat-drawer>
   <mat-drawer-content>
      <div style="height: 88vh">
         <main [class]="'px-4 pb-4'">
            <div class="content p-0">
               <div class="row mt-4 margin-head">
                  <div class="col-md-8">
                     <app-title-cycle-bar [nombre]="nombre" [proceso]="proceso"></app-title-cycle-bar>
                  </div>
                  <div class="col-md-4">
                     <app-bar-progress-bs *ngIf="fecIni && fecFin && hasIndictaros" [fecIni]="fecIni" [fecFin]="fecFin" [etapas]="etapas"></app-bar-progress-bs>
                  </div>
               </div>
               <div class="row margenes">
                  <div class="col-md-12">
                     <app-resumen-cycle-bar [title]="'Datos del ciclo'" [arrList]="cicloEva" [totalIndicadores]="length" [bol]="!hasIndictaros"></app-resumen-cycle-bar>
                  </div>
                  <mat-divider></mat-divider>
                  <div class="col-md-12 p-0 mt-3 text-center"  *ngIf="!hasIndictaros">
                     <div class="d-flex justify-content-center mt-3">
                        <img src="./assets/img/EvaluacionAutoFont.png" alt="Laureate" />
                     </div>
                     <div class="col-12 p-0">
                        <p class="title-page mt-2 title-gray">Genera tu evaluación para visualizar los indicadores que formarán parte de este ciclo</p>
                     </div>
                     <div class="col-12 p-0">
                        <p class="title-page mt-2 title-gray">Una vez generada la evaluación, después del cruce de datos, podrás editar los indicadores en este ciclo sin afectar tus catálogos</p>
                     </div>
                     <div class="col-12 p-0">
                        <button type="button" mat-raised-button color="primary"  (click)="generarIndicadores()" class="btn-text mt-3 text-center">
                        Generar Evaluación
                        </button>
                     </div>
                  </div>
               </div>
               <div class="row mt-4" *ngIf="hasIndictaros">
                  <div class="col-lg-6 col-12">
                     <button type="button" mat-raised-button color="primary" class="btn-text mt-3 ms-3" (click)="getAllExcel()">
                        <mat-icon>description</mat-icon>
                        Exportar Excel
                     </button>
                  </div>
                  <mat-form-field appearance="outline" class="col-lg-6 col-12 mt-1 pl-2">
                     <mat-label>Búsqueda por campus, área responsable, clave del indicador, nombre del indicador y descripción del indicador</mat-label>
                     <input type="text" matInput #input appInputRestriction="APLHA_NUMERIC"  (keyup)="applyFilter($event)" name="busqueda" formControlName="busqueda" />
                  </mat-form-field>
               </div>
               <div class="row mt-2">
                  <div class="col-md-6"></div>
                  <div class="col-md-6 text-right">         
                     <button id="btnParams" class="btnParams" mat-raised-button (click)="drawer.toggle()">Elegir parámetros</button>
                  </div>
               </div>
               <div class="row pb-4 mt-4"  *ngIf="hasIndictaros">
                  <div class="col-md-12 container__table mat-elevation-z8">
                     <table mat-table [dataSource]="dataSource" class="table mb-0">
                        <ng-container matColumnDef="nombreCampus">
                           <th mat-header-cell class="table__header table__cell-id" *matHeaderCellDef>Campus</th>
                           <td mat-cell class="table__cell table__cell-id" *matCellDef="let row">
                              {{ row.nombreCampus }}
                           </td>
                        </ng-container>
                        <ng-container matColumnDef="area">
                           <th mat-header-cell class="table__header table__cell-id" *matHeaderCellDef>Área responsable</th>
                           <td mat-cell class="table__cell table__cell-id" *matCellDef="let row">
                              {{ row.nombreArea }}
                           </td>
                        </ng-container>
                        <ng-container matColumnDef="indicadorTipoResultado">
                           <th mat-header-cell class="table__header table__cell-id" *matHeaderCellDef>Tipo de Resultado</th>
                           <td mat-cell class="table__cell table__cell-id" *matCellDef="let row">
                              {{ row.indicadorTipoResultado == 1 ? 'Nivel/Modalidad' : 'Común' }}
                           </td>
                        </ng-container>
                        <ng-container matColumnDef="nivelModalidad">
                           <th mat-header-cell class="table__header table__cell-id" *matHeaderCellDef>Nivel/Modalidad</th>
                           <td mat-cell class="table__cell table__cell-id" *matCellDef="let row">
                              {{ row.nivelModalidad }}
                           </td>
                        </ng-container>
                        <ng-container matColumnDef="claveIndicador">
                           <th mat-header-cell class="table__header table__cell-name" *matHeaderCellDef>Clave del Indicador</th>
                           <td mat-cell class="table__cell table__cell-name" *matCellDef="let row">
                              {{ row.claveIndicador }}
                           </td>
                        </ng-container>
                        <ng-container matColumnDef="nombreIndicador">
                           <th mat-header-cell class="table__header table__cell-id" *matHeaderCellDef>Nombre del Indicador</th>
                           <td mat-cell class="table__cell table__cell-id" *matCellDef="let row">
                              {{ row.nombreIndicador }}
                           </td>
                        </ng-container>
                        <ng-container matColumnDef="descripcionIndicador">
                           <th mat-header-cell class="table__header table__cell-name" *matHeaderCellDef>Descripción del indicador</th>
                           <td mat-cell class="table__cell table__cell-name" *matCellDef="let row">
                              {{ row.descripcionIndicador }}
                           </td>
                        </ng-container>
                        <ng-container matColumnDef="select">
                           <th mat-header-cell class="table__header table__cell--select" *matHeaderCellDef>
                              <div class="d-flex justify-content-center">Estatus</div>
                           </th>
                           <td mat-cell class="table__cell table__cell--select" *matCellDef="let row">
                              <div class="d-flex justify-content-center">
                                 <!--<mat-checkbox class="d-block" [checked]="row.activo" (click)="disableCorporateArea(row)">
                                    </mat-checkbox>-->
                                 <mat-slide-toggle class="ml-2" [checked]="row.activo"  (click)="disableCeEvaluacion(row)" ></mat-slide-toggle>         
                              </div>
                           </td>
                        </ng-container>
                        <ng-container matColumnDef="edit">
                           <th mat-header-cell *matHeaderCellDef> Acciones </th>
                           <td mat-cell class="table__cell table__cell--actions" *matCellDef="let element; let index = index">
                              <div class="d-flex justify-content-center">
                                 <button mat-button matTooltip="Ver" >
                                    <mat-icon class="eye__icon">remove_red_eye</mat-icon>
                                 </button>
                              </div>
                           </td>
                        </ng-container>
                        <tr mat-header-row *matHeaderRowDef="['nombreCampus', 'area', 'indicadorTipoResultado', 'nivelModalidad', 'claveIndicador', 'nombreIndicador', 'descripcionIndicador', 'select','edit', 'idIndicadorSiac']"></tr>
                        <tr mat-row *matRowDef="let row; columns: ['nombreCampus', 'area', 'indicadorTipoResultado', 'nivelModalidad', 'claveIndicador', 'nombreIndicador', 'descripcionIndicador', 'select', 'edit', 'idIndicadorSiac']">
                        </tr>
                     </table>
                     <ng-template>
                        <p class="empty-table mt-4">No hay datos para mostrar</p>
                     </ng-template>
                     <mat-paginator #paginator [length]="length" [pageIndex]="pageIndex" [pageSize]="pageSize"
                     [pageSizeOptions]="[25, 50, 75, 100]" class="ml-auto" showFirstLastButtons
                     (page)="paginatorChange($event)">
                     </mat-paginator>
                  </div>
               </div>
            </div>
         </main>
      </div>
   </mat-drawer-content>
</mat-drawer-container>