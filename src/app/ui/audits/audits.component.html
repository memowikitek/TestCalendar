<div class="content p-0">
    <div class="row mt-4">
        <div class="col-md-12 p-0 mb-3">
            <h1 class="title-page mt-2">Procesos de evaluaci贸n </h1>
            <p class="SubtitlesGeneral"> Consulta y agrega procesos de evaluaci贸n</p>
        </div>
        <mat-divider></mat-divider>
    </div>
    <div class="row mt-4">
        <div class="col-lg-6 col-12 mb-2">
            <button type="button" mat-raised-button color="primary" class="btn-text mt-3" (click)="openAuditRecord();"  [hidden]="!checkPermission('N')">
              <mat-icon>add</mat-icon> Nuevo proceso
            </button>
        </div>
        <mat-form-field appearance="outline" class="col-lg-6 col-12 mt-1 pl-2">
            <mat-label>Buscar por Nombre proceso de evaluaci贸n</mat-label>
            <!-- <input type="text" matInput #input appInputRestriction="APLHA_NUMERIC" name="busqueda" formControlName="busqueda" (keyup)="applyFilter($event)" /> -->
            <input type="text" matInput [formControl]="searchControl" appInputRestriction="ALPHA_NUMERIC" name="busqueda" />
        </mat-form-field>
    </div>
    <div class="row">
        <div class="col-md-12 container__table mat-elevation-z8">
          <table mat-table [dataSource]="dataSource">              
              <ng-container matColumnDef="nombre">
                <th mat-header-cell *matHeaderCellDef> Nombre proceso de evaluaci贸n </th>
                <td mat-cell *matCellDef="let element"> {{element.nombre}} </td>
              </ng-container>
              <ng-container matColumnDef="activo">
                  <th mat-header-cell *matHeaderCellDef> Estatus </th>
                  <td mat-cell *matCellDef="let element"> 
                    <mat-slide-toggle (change)="onChange($event, element.id)" [checked]="element.activo"   [disabled]="!checkPermission('E')">                            
                    </mat-slide-toggle>

                  </td>
                </ng-container>
                <ng-container matColumnDef="totalIndicadores">
                  <th mat-header-cell *matHeaderCellDef> Total de indicadores asociados </th>
                  <td mat-cell *matCellDef="let element"> {{element.totalIndicadores}} </td>
                </ng-container>
                <ng-container matColumnDef="edit" >                        
                  <th mat-header-cell *matHeaderCellDef> Acciones  </th>
                  <td mat-cell class="table__cell table__cell--actions" *matCellDef="let element; let index = index">
                    <div class="d-flex justify-content-center">
                        <button mat-button matTooltip="Editar" (click)="editAudit(element)"  [hidden]="!checkPermission('E')">
                            <mat-icon class="edit__icon">edit</mat-icon>
                        </button>
                        <button mat-button matTooltip="Eliminar"   [hidden]="!checkPermission('D')"
                        (click)="deleteCoporateAreaByConfimation(element)">
                        <mat-icon class="delete__icon">delete_forever</mat-icon>
                    </button>
                      </div>
                      
                </td>  
                </ng-container>    
                
                <tr mat-header-row *matHeaderRowDef="['nombre', 'totalIndicadores', 'activo', 'edit']"></tr>
                <tr mat-row *matRowDef="let element; columns: ['nombre', 'totalIndicadores','activo', 'edit']"></tr>
        </table>
        <ng-template [ngIf]="dataSource.data.length === 0">
          <p class="empty-table mt-4">No hay datos para mostrar</p>
        </ng-template>      
        <mat-paginator #paginator [length]="length" [pageIndex]="pageIndex" [pageSize]="pageSize"
        [pageSizeOptions]="[5, 10, 15, 20]" class="ml-auto" showFirstLastButtons
        (page)="paginatorChange($event)"></mat-paginator>                  
    </div>                          
  </div>    
</div>